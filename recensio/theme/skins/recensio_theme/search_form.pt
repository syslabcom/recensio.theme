<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="recensio">

  <metal:block fill-slot="top_slot"
               tal:define="dummy python:request.set('disable_border',1);
                           disable_column_two python:request.set('disable_plone.rightcolumn',1);" />

  <metal:main fill-slot="main">

    <h1 class="documentFirstHeading"
        i18n:translate="heading_advanced_search">Erweiterte Suche</h1>

    <div class="documentDescription" i18n:translate="description_advanced_search">
    Mithilfe folgender Kategorien durchsuchen und filtern Sie die gesamte Plattform
    (inklusive des Volltexts der als PDF bereitgestellten Rezensionen).
    </div>

    <div id="content-core">

      <metal:define define-macro="form">

        <form action="search"
              class="enableAutoFocus"
              method="post"
              name="search"
              id="searchform"
              tal:define="DateTime python:modules['DateTime'].DateTime;
                          portal context/@@plone_portal_state/portal;
                          recensiohelperview python:portal.restrictedTraverse('@@recensio-helper-view');
                          portal_catalog nocall:portal/portal_catalog;
                          supp_languages recensiohelperview/listAvailableContentLanguages;
                          authors request/authors|string:;
                          authors python:getattr(authors, 'append', None) and ' '.join(authors) or authors;
                          "
            >
			<fieldset>
			<legend i18n:translate="label_search_text">Volltextsuche</legend>
          <input type="hidden" name="advanced_search" value="True" />
          <input type="hidden" value="languageReview" name="facet_field">
          <input type="hidden" value="true" name="facet">

          <div class="field">
            <div class="formHelp" i18n:translate="help_search_text">
              For a full text search, enter your search term
              here. Multiple words may be found by combining
              them with <strong>AND</strong> and <strong>OR</strong>.
            </div>

            <input type="text"
                   id="SearchableText"
                   name="SearchableText"
                   size="25"
                   tal:attributes="value request/SearchableText|nothing"
                   />
          </div>
		<div class="visualClear" id="clear-space-before-submit"></div>

          <div class="formControls">
            <input class="context"
                   type="submit"
                   name="submit"
                   value="Search"
                   i18n:attributes="value label_search;"
                   />
          </div>

          </fieldset>
		  <fieldset>
			<legend i18n:translate="label_general">Generelles</legend>


        <tal:datetime tal:replace="nothing"
                      define="today python:DateTime().earliestTime();
                                    isAnon context/@@plone_portal_state/anonymous;
                                    member context/@@plone_portal_state/member;
                                    yesterday python:(today-1).Date();
                                    lastweek python:(today-7).Date();
                                    lastmonth python:(today-31).Date();
                                    threemonths python:(today-90).Date();
                                    sixmonths python:(today-180).Date();
                                    ever string:1970/02/01;">
          <div class="field">

            <label for="created"
                   i18n:translate="label_new_items_since" i18n:domain="plone">New items since</label>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_new_items_since" i18n:domain="plone">
                Return items added since you were last logged on, the last week, etc.
              </div>

                <select name="created:list:date"
                        id="created"
                        tal:define="selected python:request.get('created', []);
                                    selected python:(len(selected) == 1) and selected[0].Date() or ever">
                  <option value="#"
                          tal:condition="not: isAnon"
                          tal:define="value python:member is not None and member.getProperty('last_login_time') or today"
                          tal:attributes="value value;
                                          selected python:selected==value and 'selected' or '';"
                          i18n:translate="last_login">Last log-in</option>
                  <option value="#"
                          tal:attributes="value yesterday;
                                          selected python:selected==yesterday and 'selected' or '';"
                          i18n:translate="time_yesterday" i18n:domain="plone"> Yesterday </option>
                  <option value="#"
                          tal:attributes="value lastweek;
                                          selected python:selected==lastweek and 'selected' or '';"
                          i18n:translate="time_last_week" i18n:domain="plone"> Last week </option>
                  <option value="#" tal:attributes="value lastmonth;
                                                    selected python:selected==lastmonth and 'selected' or '';"
                          i18n:translate="time_last_month" i18n:domain="plone"> Last month </option>
                  <option value="#" tal:attributes="value threemonths;
                                                    selected python:selected==threemonths and 'selected' or '';"
                          i18n:translate="time_three_months"> 3 months ago </option>
                  <option value="#" tal:attributes="value sixmonths;
                                                    selected python:selected==sixmonths and 'selected' or '';"
                          i18n:translate="time_six_months"> 6 months ago </option>
                  <option value="#"
                          class="default_option"
                          tal:attributes="value ever;
                                          selected python:selected==ever and 'selected' or '';"
                          i18n:translate="time_ever" i18n:domain="plone"> Ever </option>
                </select>
            </div>

            <input type="hidden" name="created_usage" value="range:min" />
          </div>


          <div class="field">

            <label for="created"
                   class=""
                   i18n:translate="label_modified_items_since">Modified items since</label>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_modified_items_since">
                Return items modified since you were last logged on, the last week, etc.
              </div>

                <select name="modified:list:date"
                        id="created"
                        tal:define="selected python:request.get('modified', []);
                                    selected python:(len(selected) == 1) and selected[0].Date() or ever">
                  <option value="#"
                          tal:condition="not: isAnon"
                          tal:define="value python:member is not None and member.getProperty('last_login_time') or today"
                          tal:attributes="value value;
                                          selected python:selected==value and 'selected' or '';"
                          i18n:translate="last_login">Last log-in</option>
                  <option value="#"
                          tal:attributes="value yesterday;
                                          selected python:selected==yesterday and 'selected' or '';"
                          i18n:translate="time_yesterday" i18n:domain="plone"> Yesterday </option>
                  <option value="#"
                          tal:attributes="value lastweek;
                                          selected python:selected==lastweek and 'selected' or '';"
                          i18n:translate="time_last_week" i18n:domain="plone"> Last week </option>
                  <option value="#" tal:attributes="value lastmonth;
                                                    selected python:selected==lastmonth and 'selected' or '';"
                          i18n:translate="time_last_month" i18n:domain="plone"> Last month </option>
                  <option value="#" tal:attributes="value threemonths;
                                                    selected python:selected==threemonths and 'selected' or '';"
                          i18n:translate="time_three_months"> 3 months ago </option>
                  <option value="#" tal:attributes="value sixmonths;
                                                    selected python:selected==sixmonths and 'selected' or '';"
                          i18n:translate="time_six_months"> 6 months ago </option>
                  <option value="#"
                          class="default_option"
                          tal:attributes="value ever;
                                          selected python:selected==ever and 'selected' or '';"
                          i18n:translate="time_ever" i18n:domain="plone"> Ever </option>
                </select>
            </div>

            <input type="hidden" name="modified_usage" value="range:min" />
          </div>
        </tal:datetime>

          <div class="field">


            <label i18n:translate="label_recension_language"
                   class="">Language of the Review or Presentation</label>

            <input class="collapse_trick" type="text" tal:attributes="value python:request.get('languageReview', '')"/>
            <div class="">
              <div class="formHelp" i18n:translate="help_search_recension_language">
                Return items in selected languages.
              </div>

              <select style="float:left; margin-right: 2em;"
                 tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');"
                 name="languageReview:list"
                multiple="multiple"
                size="5">
                <option tal:repeat="lang supp_languages/keys" tal:attributes="value lang;
                                         id string:languageReview_${repeat/lang/number};
                                         selected python:((lang in request.get('languageReview', []))) and 'selected' or ''"
                        tal:content="python:supp_languages.getValue(lang)">value</option>

              </select>
              <div class="visualClear" id="clear-after-recension-language"><!-- --></div>
            </div>
          </div>

          <div class="field">

            <label i18n:translate="label_works_language"
                   class="">Language of the Reviewed Works</label>
            <input class="collapse_trick" type="text" tal:attributes="value python:request.get('languageReviewedText', '')"/>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_works_language">
                Return items that review works in selected the languages.
              </div>

              <select style="float:left; margin-right: 2em;"
                tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');"
                 name="languageReviewedText:list"
                multiple="multiple"
                size="5">
                <option tal:repeat="lang supp_languages/keys" tal:attributes="value lang;
                                         id string:languageReview_${repeat/lang/number};
                                         selected python:((lang in request.get('languageReviewedText', []))) and 'selected' or ''"
                        tal:content="python:supp_languages.getValue(lang)">value</option>

              </select>
              <div class="visualClear" id="clear-after-works-language"></div>
            </div>
          </div>


          <div class="field"

               tal:condition="python:False">

            <label for="review_state"
                   class=""
                   i18n:translate="label_review_status">Review status</label>
            <input class="collapse_trick" type="text" tal:attributes="value python:request.get('review_state', '')"/>

            <div class=""
                 tal:define="navtree_props portal/portal_properties/navtree_properties;
                             states python:portal.portal_workflow.listWFStatesByTitle(filter_similar=1);
                             used_states python:portal.portal_catalog.uniqueValuesFor('review_state');
                             filtered_states python:[state for state in states if state[1] in used_states];
                             all_checked python:(len(filtered_states) == len(request.get('review_state', [])));
                             toggle_select_state python:all_checked and 'true' or 'false';">
              <div class="formHelp" i18n:translate="help_search_review_status">
                You may search for items based on their
                review state. If you wish to constrain results to items
                in certain states, select them from this list.
              </div>

              <tal:states define="
                                  state_lists python:context.createMultiColumnList(filtered_states, numCols=1, sort_on='self');
                                  normalizeString nocall:context/@@plone/normalizeString;"
                          repeat="sublist state_lists">
                <tal:items repeat="state sublist">
                  <input class="noborder"
                         type="checkbox"
                         name="review_state:list"
                         checked="checked"
                         tal:attributes="value python:state[1];
                                         id python:normalizeString(state[1]);
                                         checked python:((state[1] in request.get('review_state', [])) ) and 'checked' or ''" />
                  <label for=""
                         tal:attributes="for python:normalizeString(state[1])"
                         i18n:translate=""
                         tal:content="python:state[0] or state[1]"
                         />
                  <br />
                </tal:items>
              </tal:states>
            </div>
          </div>


          <div class="field">

            <label for="authorsFulltext"
                   class=""
                   i18n:translate="label_review_autor">Autor/Herausgeber</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_review_autor">
                Autor von Monographie/Aufsatz/Kommentar oder Herausgeber des Sammelbandes
              </div>

              <input type="text"
                     id="authorsFulltext"
                     name="authorsFulltext"
                     size="25"
                     tal:attributes="value request/authorsFulltext|authors|nothing"
                     />
            </div>
          </div>

          <div class="field" tal:replace="nothing">

            <label for="Rezensent"
                   class=""
                   i18n:translate="label_rezensent">Rezensent</label>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_rezensent">
                Return items created by a particular person.
              </div>

              <tal:rezensenten tal:define="rezensenten python:portal.portal_catalog.uniqueValuesFor('getReviewAuthor');
                                        selected request/Creator|nothing">
                <select name="Rezensent"
                        id="Rezensent"
                        tal:condition="python: len(rezensenten) &lt;= 30">
                  <option value=""
                          class="default_option"
                          i18n:translate="label_any_author">Any Creator</option>
                  <metal:block tal:repeat="rezensent rezensenten">
                    <option value=""
                            tal:attributes="value rezensent;
                                            selected python:selected == rezensent and 'selected' or '';"
                            tal:content="rezensent">username </option>
                  </metal:block>
                </select>

                <input name="Rezensent"
                       tal:condition="python: len(rezensenten) &gt; 30 "
                       tal:attributes="value selected" />
              </tal:rezensenten>
            </div>
          </div>

          <div class="field">

            <label for="Creator"
                   class=""
                   i18n:translate="label_author">Creator</label>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_author">
                Return items created by a particular person.
              </div>

              <tal:creators tal:define="creators python:portal.portal_catalog.uniqueValuesFor('Creator');
                                        selected request/Creator|nothing">
                <select name="Creator"
                        id="Creator"
                        tal:condition="python: len(creators) &lt;= 30">
                  <option value=""
                          class="default_option"
                          i18n:translate="label_any_author">Any Creator</option>
                  <metal:block tal:repeat="creator creators">
                    <option value=""
                            tal:attributes="value creator;
                                            selected python:selected == creator and 'selected' or '';"
                            tal:content="creator">username </option>
                  </metal:block>
                </select>

                <input name="Creator"
                       tal:condition="python: len(creators) &gt; 30 "
                       tal:attributes="value selected" />
              </tal:creators>
            </div>
          </div>


          <div class="formControls">
            <input class="context"
                   type="submit"
                   name="submit"
                   value="Search"
                   i18n:attributes="value label_search;"
                   />
          </div>
         </fieldset>

		<fieldset>
		<legend i18n:translate="label_titleOrShortname">Buch, Aufsatz, Zeitschrift</legend>

          <div class="field">
            <div class="">
              <div class="formHelp" i18n:translate="help_titleOrShortname">
                Titel des rezensierten Buches, des Aufsatzes oder der Zeitschrift, in der die Review erschienen ist
              </div>

              <input type="text"
                     id="titleOrShortname"
                     name="titleOrShortname"
                     size="25"
                     tal:attributes="value request/titleOrShortname|nothing"
                     />
            </div>
          </div>

          <div class="field"
               >
            <label for="year"
                   class=""
                   i18n:translate="label_year">Jahr</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_year">
                Erscheinungsjahr oder gezähltes Jahr
              </div>

              <input type="text"
                     id="year"
                     name="year"
                     size="4"
                     tal:attributes="value request/year|nothing"
                     />
            </div>
          </div>

          <div class="field">

            <label for="place"
                   class=""
                   i18n:translate="label_place">Ort</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_place">
                Erscheinungsort
              </div>

              <input type="text"
                     id="place"
                     name="place"
                     size="25"
                     tal:attributes="value request/place|nothing"
                     />
            </div>
          </div>

          <div class="field"
               >
            <label for="publisher"
                   class=""
                   i18n:translate="label_publisher">Verlag</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_publisher">
                Verlag, in dem das Buch/die Zeitschrift erschienen ist
              </div>

              <input type="text"
                     id="publisher"
                     name="publisher"
                     size="25"
                     tal:attributes="value request/publisher|nothing"
                     />
            </div>
          </div>

          <div class="field">

            <label for="series"
                   class=""
                   i18n:translate="label_series">Reihe</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_series">
                The serie you are looking for.

              </div>

              <input type="text"
                     id="series"
                     name="series"
                     size="25"
                     tal:attributes="value request/series|nothing"
                     />
            </div>
          </div>

          <div class="field">

            <label for="isbn"
                   class=""
                   i18n:translate="label_isbn">ISBN</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_isbn">
                Internationale Standardbuchnummer
              </div>

              <input type="text"
                     id="isbn"
                     name="isbn"
                     size="25"
                     tal:attributes="value request/isbn|nothing"
                     />
            </div>
          </div>

          <div class="formControls">
            <input class="context"
                   type="submit"
                   name="submit"
                   value="Search"
                   i18n:attributes="value label_search;"
                   />
          </div>
		</fieldset>

		<fieldset>

          <dl class="collapsible collapsedOnLoad">
            <dt class="collapsibleHeader">
            <h2 i18n:translate="thematic_search">Thematische Suche</h2>

            </dt>

          <dd class="collapsibleContent">


          <div class="field"

               tal:define="voc python:context.portal_vocabularies.getVocabularyByName('region_values');
                           avail_regions python:voc.getDisplayList(voc).items();
                           all_checked python:(len(avail_regions) == len(request.get('ddcPlace', []))) ;
                           toggle_select_state python:all_checked and 'true' or 'false';">
            <label for="region"
                   class=""
                   i18n:translate="label_region">Region</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_region">
               The region that you are looking for.
              </div>

              <div style="float:left; margin-right: 2em;"
                   tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');">
                <select multiple="multiple"
                        name="ddcPlace:list"
                        size="10">
                  <tal:items repeat="reg avail_regions">
                    <option tal:attributes="value python:reg[0]; selected python:((reg[0] in request.get('ddcPlace', [])) ) and 'selected'" tal:content="python:reg[1]" />
                  </tal:items>
                </select>
              </div>
              <div class="visualClear" id="clear-after-region"><!-- --></div>

            </div>
          </div>

          <div class="field"

               tal:define="voc python:context.portal_vocabularies.getVocabularyByName('epoch_values');
                           avail_epochs python:voc.getDisplayList(voc).items();
                           all_checked python:(len(avail_epochs) == len(request.get('ddcTime', []))) ;
                           toggle_select_state python:all_checked and 'true' or 'false';">
            <label for="epoch"
                   class=""
                   i18n:translate="label_epoch">Epoche</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_epoch">
                The epoch that you are looking for

              </div>

              <div style="float:left; margin-right: 2em;"
                   tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');">
                <select multiple="multiple"
                        name="ddcTime:list"
                        size="10">
                  <tal:items repeat="epo avail_epochs">
                    <option tal:attributes="value python:epo[0]; selected python:((epo[0] in request.get('ddcTime', [])) ) and 'selected'" tal:content="python:epo[1]" />
                  </tal:items>
                </select>
              </div>
              <div class="visualClear" id="clear-after-epoch"><!-- --></div>

            </div>
          </div>

          <div class="field"

               tal:define="voc python:context.portal_vocabularies.getVocabularyByName('topic_values');
                           avail_topics python:voc.getDisplayList(voc).items();
                           all_checked python:(len(avail_topics) == len(request.get('ddcSubject', []))) ;
                           toggle_select_state python:all_checked and 'true' or 'false';">
            <label for="topic"
                   class=""
                   i18n:translate="label_topic">Thema</label>
            <div class="">
              <div class="formHelp" i18n:translate="help_topic">
               The Topic that you are looking for
              </div>


              <div style="float:left; margin-right: 2em;"
                   tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');">
                <select multiple="multiple"
                        name="ddcSubject:list"
                        size="10">
                  <tal:items repeat="top avail_topics">
                    <option tal:attributes="value python:top[0]; selected python:((top[0] in request.get('ddcSubject', [])) ) and 'selected'" tal:content="python:top[1]" />
                  </tal:items>
                </select>
              </div>
              <div class="visualClear" id="clear-after-topic"><!-- --></div>

            </div>
          </div>

          <div class="field"
               tal:define="usedSubjects python:context.portal_catalog.uniqueValuesFor('Subject');"
               tal:condition="usedSubjects">

            <label for="topic"
                   class=""
                   i18n:translate="label_tags">Schlagwörter</label>

            <div class="formHelp" i18n:translate="help_search_tags">
              Return items matching some or all of these tags.
              Multiple words may be found by pressing <strong>Ctrl</strong>
              (or <strong>Apple</strong> key on Mac) while clicking the
              keywords.
            </div>

            <select name="Subject:list"
                    id="Subject"
                    size="7"
                    multiple="multiple"
                    tal:define="contentSubjects context/Subject;">
              <option value="#"
                      tal:repeat="subject usedSubjects"
                      tal:content="subject"
                      tal:attributes="value subject"
                      i18n:domain="plone-metadata"
                      i18n:translate=""
                      >dummy</option>
            </select>
            <br />

            <input type="radio"
                   name="Subject_usage:ignore_empty"
                   id="Subject_or"
                   value=""
                   class="noborder"
                   tal:attributes="checked python:(request.get('Subject_usage:ignore_empty', '') == '') and 1 or ''"/>
            <label for="Subject_or" i18n:translate="description_subject_or">
              Match any
            </label>
            <br />

            <input type="radio"
                   name="Subject_usage:ignore_empty"
                   id="Subject_and"
                   value="operator:and"
                   class="noborder"
                   tal:attributes="checked python:(request.get('Subject_usage:ignore_empty') != '') and 1 or 0"/>
            <label for="Subject_and" i18n:translate="description_subject_and">
              Match all
            </label>
          </div>

          <div class="formControls">
            <input class="context"
                   type="submit"
                   name="submit"
                   value="Search"
                   i18n:attributes="value label_search;"
                   />
          </div>
        </dl>
    </fieldset>


    <fieldset>

          <dl class="collapsible collapsedOnLoad">
            <dt class="collapsibleHeader">
            <h2 i18n:translate="label_magazines">Zeitschriften</h2>
              <div class="formHelp" i18n:translate="help_search_magazines">
                Findet Artikel, die in einer der ausgewählten Zeitschrift erschienen sind.
              </div>

            </dt>

          <dd class="collapsibleContent">
          <div class="field"

               tal:define="avail_magazines python:portal_catalog(portal_type='Publication');
                           all_checked python:(len(avail_magazines) == len(request.get('avail_magazines', []))) ;
                           toggle_select_state python:all_checked and 'true' or 'false';">

            <div class="">
              <span class="optionsToggle">
                <input type="checkbox"
                       onclick=""
                       name="pt_toggle"
                       value="#"
                       id="pt_toggle"
                       class="noborder"
                       checked="checked"
                       tal:attributes="checked python:all_checked and 'checked' or '';
                                       onclick string:javascript:toggleSelect(this, 'path:list', ${toggle_select_state});"/>
                <label for="pt_toggle"
                       i18n:translate="label_toggle"
                       >Select All/None
                </label>
              </span>
              <br />
              <div style="float:left; margin-right: 2em;"
                   tal:define="magazineLists python:context.createMultiColumnList(sequence.sort(avail_magazines, sort=(('Title', 'nocase', 'asc'),)), numCols=2);"
                   tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');"
                   tal:repeat="sublist magazineLists">
                <tal:items repeat="mag sublist">
                  <input type="checkbox"
                         name="path:list"
                         value="#"
                         class="noborder"
                         checked="checked"
                         tal:attributes="value mag/getPath;
                                         id string:magazines_${repeat/sublist/number}_${repeat/mag/number};
                                         checked python:((mag.getPath() in request.get('path', [])) ) and 'checked' or ''"/>
                  <label for=""
                         i18n:translate=""
                         tal:attributes="for string:magazines_${repeat/sublist/number}_${repeat/mag/number}"
                         tal:content="python: mag.Title or mag.getId"
                         />
                  <br />
                </tal:items>
              </div>
              <div class="visualClear" id="clear-after-magazine"><!-- --></div>
            </div>
          </div>
          </dd>

</fieldset>

    <fieldset>

          <h2 i18n:translate="">Display options</h2>

          <div class="field"

               tal:define="portal_types portal/portal_types;
                           all_used_types  python:context.portal_catalog.uniqueValuesFor('portal_type');
                           all_used_types python:[x for x in all_used_types if x not in ('Topic', 'Folder', 'Document', 'Image', 'Issue', 'Volume')];
                           used_types  python:context.plone_utils.getUserFriendlyTypes(all_used_types);
                           all_checked python:(len(used_types) == len(request.get('portal_type', [])));
                           toggle_select_state python:all_checked and 'true' or 'false';">
            <label i18n:translate="label_item_type" i18n:domain="plone"
                   class="">Item type</label>
            <input class="collapse_trick" type="text" tal:attributes="value python:request.get('portal_type', '')"/>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_item_type" i18n:domain="plone">
                Return items of a specific type.
              </div>

              <div style="float:left; margin-right: 2em;"
                   tal:define="typeLists python:context.createMultiColumnList(used_types, numCols=2, sort_on='self');"
                   tal:attributes="style python:test(isRTL, 'float: right;; margin-left: 2em;;', 'float: left;; margin-right: 2em;;');"
                   tal:repeat="sublist typeLists">
                <tal:items repeat="type sublist">
                  <input type="checkbox"
                         name="portal_type:list"
                         value="#"
                         class="noborder"
                         checked="checked"
                         tal:attributes="value type;
                                         id string:portal_type_${repeat/sublist/number}_${repeat/type/number};
                                         checked python:((type in request.get('portal_type', []))) and 'checked' or ''"/>
                  <label for=""
                         i18n:translate="" i18n:domain="recensio"
                         tal:attributes="for string:portal_type_${repeat/sublist/number}_${repeat/type/number}"
                         tal:content="python: portal_types.getTypeInfo(type).Title()"
                         />
                  <br />
                </tal:items>
              </div>
              <div class="visualClear" id="clear-after-item-type"><!-- --></div>
            </div>
          </div>


          <div class="field"

               tal:condition="python:False">
            <label for="Title"
                   class=""
                   i18n:translate="label_title">Title</label>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_title">
                Return items matching this title.
              </div>

              <input type="text"
                     id="Title"
                     name="Title"
                     size="25"
                     value=""
                     tal:attributes="value request/Title|nothing"
                     />
            </div>
          </div>

          <div class="field"

               tal:condition="python:False">

            <label for="Description"
                   class=""
                   i18n:translate="label_description">Description</label>

            <div class="">
              <div class="formHelp" i18n:translate="help_search_description">
                Return items matching this description.
                Multiple words may be found
                by combining them with <strong>AND</strong> and <strong>OR</strong>.
              </div>

              <input type="text"
                     id="Description"
                     name="Description"
                     size="25"
                     value=""
                     tal:attributes="value request/Description|nothing"
                     />
            </div>
          </div>

          <div class="field"
               tal:condition="python:True">
            <label for="sort_on" i18n:translate="">Sort results</label>

            <div class="formHelp" i18n:translate="">
              Sort the Search Results based on the selected criterion
            </div>

            <select name="sort_on"
                    id="sort_on"
                    tal:define="selected request/form/sort_on|nothing">
              <option value="created"
                      tal:attributes="selected python:selected == 'created' and 'selected' or ''"
                      i18n:translate="">Creation Date</option>
              <option value=""
                      tal:attributes="selected python:selected == '' and 'selected' or ''"
                      i18n:translate="">Relevance</option>
              <option value="modified"
                      tal:attributes="selected python:selected == 'modified' and 'selected' or ''"
                      i18n:translate="">Modification Date</option>
              <option value="sortable_title"
                      tal:attributes="selected python:selected == 'sortable_title' and 'selected' or ''"
                      i18n:translate="">Title</option>
            </select>

          </div>

          <div class="field"
               tal:condition="python:True">
            <label for="b_size" i18n:translate="label_results_per_page">Results per page</label>

            <div class="formHelp" i18n:translate="description_results_per_page">
              The number of results that is displayed on one page.
            </div>

            <select name="b_size:int"
                    id="b_size"
                    tal:define="selected request/form/b_size|nothing">
              <option value="30"
                      tal:attributes="selected python:selected == 30 and 'selected' or ''"
                      i18n:translate="">30</option>
              <option value="60"
                      tal:attributes="selected python:selected == 60 and 'selected' or ''"
                      i18n:translate="">60</option>
              <option value="90"
                      tal:attributes="selected python:selected == 90 and 'selected' or ''"
                      i18n:translate="">90</option>
            </select>

          </div>

          <div class="visualClear" id="clear-space-before-submit"></div>

          <div class="formControls">
            <input class="context"
                   type="submit"
                   name="submit"
                   value="Search"
                   i18n:attributes="value label_search;"
                   />
          </div>
		</fieldset>

		<fieldset tal:replace="nothing">
          <legend i18n:translate="help_recensio_id">recensio-ID</legend>

          <div class="field">

              <input type="text"
                     id="recensioID"
                     name="UID"
                     size="16"
                     tal:attributes="value request/UID|nothing"
                     />
            </div>

		<div class="visualClear" id="clear-space-before-submit"></div>

          <div class="formControls">
            <input class="context"
                   type="submit"
                   name="submit"
                   value="Search"
                   i18n:attributes="value label_search;"
                   />
          </div>
		</fieldset>


        </form>

      </metal:define>
    </div>
  </metal:main>

</html>
