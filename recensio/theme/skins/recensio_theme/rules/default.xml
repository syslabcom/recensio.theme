<?xml version="1.0" encoding="UTF-8"?>
<rules xmlns="http://namespaces.plone.org/xdv" 
       xmlns:css="http://namespaces.plone.org/xdv+css">
    <replace content='/html/head/title' theme='/html/head/title' />
    <replace content='/html/head/base' theme='/html/head/base' />

    <!--prepend content='/html/head/link' theme='/html/head' /-->
    <!--prepend content='/html/head/style' theme='/html/head' /-->
    <prepend content='/html/head/script' theme='/html/head' /> 
    <!-- once we sort out the css content problems, include this -->
    <!-- Pull in Plone CSS -->
    <append theme="/html/head" content="/html/head/link | /html/head/style" />
    
    
    <!-- Copy over the id/class attributes on the body tag, this is important
         for Kupu and per-section styling -->
    <prepend theme="/html/body" content="/html/body/@class" />
    <prepend theme="/html/body" content="/html/body/@id" />

    <!-- transfer the breadcrumbs -->
    <replace css:content="div#portal-breadcrumbs > * " 
             css:theme="div#loc > span#portal-breadcrumbs" />

    <!-- The top navigation -->
    <replace css:content="ul#portal-globalnav "
             css:theme="div#navigation > ul " />

    <!-- portal languageselector -->
    <replace css:content="ul#portal-languageselector "
             css:theme="p#language " />

    <!-- Main content rule: Put plone content into recensio content_left -->
    <append content="//div[@id='content']/*" 
             theme="//div[@id='content_left']" />
    <!-- Main portlet rule: Put plone right column into recensio column3 -->
    <append content="//div[@id='portal-column-two']/*" 
             theme="//div[@id='column3']/span" />

    <!-- transfer the link on the logo -->
    <prepend content="//*[@id='portal-logo']/attribute::href" 
            theme="//*[@id='logo']" />
            
    <!-- transfer the content views for editing -->
    <prepend css:content="div#edit-bar"
             css:theme="div#edit-bar"  />

    <replace css:content="dl.portalMessage"
             css:theme="dl.portalMessage" />

    <!-- site actions -->
    <replace content="//*[@id='portal-siteactions']" 
             theme="//*[@id='portal-siteactions']" />

    <!-- personaltools -->
    <replace content="//*[@id='portal-personaltools-wrapper']" 
             theme="//*[@id='portal-personaltools-wrapper']" />
    
    <!-- portal searchbox goes into column3 -->
    <prepend css:content="div#portal-searchbox"
             css:theme="div#column3" />
             
             
    <!-- FIXES -->
    <!-- Clear space before navigation inflicts a large offset of the content from the header. We drop it -->
    <drop content="//*[@id='clear-space-before-navigation']" />

<!--
    <replace content='//*[@id="portal-personaltools"]' theme='//*[@id="portal-personaltools"]' />
    <replace content='//*[@id="portal-searchbox"]/*' theme='//*[@id="search-container"]/*' />

    <replace content='//*[@id="portal-breadcrumbs"]' theme='//*[@id="breadcrumbs"]'/>
-->
    <!-- rule for control panel, apply only if a portlet prefs portlet is present -->
<!--    <append content='//*[@id="portal-column-one"]' theme='//*[@id="portlet-slot-1"]' 
            if-content="//dl[@id='portlet-prefs']"/>
    <append content='//*[@id="portal-column-one"]' theme='//*[@id="portlet-slot-1"]' 
            if-content="//div[@id='portletmanager-plone-leftcolumn']"/>
-->
    <!-- add the right portlet column -->
<!--    <append content='//*[@id="portal-column-two"]' theme='//*[@id="portlet-slot-2"]' />
    
    <append content='//*[@id="status-messages"]/*' theme='//*[@id="status-messages-container"]'/>
    <replace content='//*[@id="portal-column-content"]/div/*' theme='//*[@id="folder-contents"]/*' />

    <replace content='//*[@id="footpanel"]' theme='//*[@id="dockbottoms-inner"]' />
-->
</rules>
