<div id="publicationlisting"
     tal:define="language context/@@plone_portal_state/language;
                 portal_url context/portal_url;"
     i18n:domain="recensio"
     tal:condition="view/visible">

  <tal:volumes define="volumes view/volumes"
               repeat="volume_key python:volumes.keys()">
    <tal:volume define="volume python:volumes[volume_key]">
      <h2 tal:content="volume/Title" />

      <tal:reviews repeat="
review python:volume.has_key('reviews') and volume['reviews'] or []">
        <h4 tal:content="review/Title" />
      </tal:reviews>

     <tal:issues repeat="
issue_key python:volume.has_key('issues') and volume['issues'].keys() or []">
        <tal:issue define="issue python:volume['issues'][issue_key]">
          <h3 tal:content="issue/Title" />

          <ul>
            <li tal:repeat="review issue/reviews">
              <a tal:attributes="href review/absolute_url"
                 tal:content="review/getDecoratedTitle" />
            </li>
          </ul>
        </tal:issue>
      </tal:issues>


    </tal:volume>
  </tal:volumes>

</div>
