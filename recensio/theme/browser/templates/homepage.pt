<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="recensio">


    <metal:javascript_head fill-slot="javascript_head_slot">
      <script type="text/javascript"
              src="++resource++recensio.theme.javascript/jquery.ThreeDots.min.js"></script>
      <script type="text/javascript"
              src="++resource++recensio.theme.javascript/homepage.js"></script>
    </metal:javascript_head>

  <body>
    <metal:main fill-slot="main"
                tal:define="ploneview python:context.restrictedTraverse('@@plone')">

      <div id="content_left"
           tal:define="portal context/portal_url">
        <div id="rowTop" class="boxrow">

          <div class="box">
            <a class="one-line"
               href="#"
               tal:attributes="href string:${portal}/search?portal_type:list=Issue&amp;sort_on=effective&amp;sort_order=reverse">
              <h2 i18n:translate="label_latest_review_journals">
                Neueste Rezensionsteile online</h2>
            </a>
            <div id="latest_reviewparts_box"
                 tal:define="results view/getReviewJournals">
              <ul>
                <li class="ellipsis_container"
                    tal:repeat="res results">
                  <div class="effective_date"
                       tal:content="res/effective_date"/>
                  <div class="ellipsis_text">
                    <span
                        tal:attributes="href res/publication_url"
                        tal:content="res/publication_title">title
                    </span>,
                    <span tal:condition="res/volume_title">
                        <span tal:replace="res/volume_title" />,
                    </span>
                    <a href="#"
                        tal:attributes="href res/review_url"
                        tal:content="res/Title">title</a>
                  </div>
                </li>
              </ul>
            </div>
          </div>


          <div class="box right_box">
            <a class="one-line"
               tal:attributes="href string:${portal}/search?portal_type:list=Review+Monograph&amp;sort_on=effective&amp;sort_order=reverse">
              <h2 i18n:translate="label_latest_reviews">
                Neueste Rezensionen online</h2>
            </a>
            <div id="latest_reviews_box"
                 tal:define="results view/getReviewMonographs">
              <span tal:repeat="langres results">
                <!-- <label><span tal:replace="langres/langname" /></label> -->
                <ul id="list_reviews"
                    tal:attributes="id string:list_reviews_${langres/language}">
                  <tal:res repeat="res langres/results">
                      <li tal:define="is_first python:repeat['res'].start and 'is_first' or 'not_first'"
                          tal:attributes="class string:ellipsis_container ${is_first}">
                        <div class="effective_date"
                             tal:content="python:view.format_effective_date(res.EffectiveDate)"/>
                        <a href="#" class="ellipsis_text"
                           tal:attributes="href res/getURL">
                          <span tal:replace="res/Title" />
                        </a>
                      </li>
                  </tal:res>
                </ul>
                <div class="visualClear"></div>
              </span>
            </div>
          </div>
        </div>

        <div class="visualClear"></div>

        <div id="rowBottom" class="boxrow">
          <div class="box">
            <a class="two-lines"
               tal:attributes="href string:${portal}/search?portal_type:list=Presentation+Monograph&amp;portal_type:list=Presentation+Article+Review&amp;portal_type:list=Presentation+Collection&amp;sort_on=effective&amp;sort_order=reverse">
              <h2 i18n:translate="label_latest_monographies">
                Neueste Präsentationen von Monographien und Aufsätzen</h2>
            </a>
            <div id="latest_monographies_box"
                 tal:define="results view/getPrintedPresentations">
              <ul>
                <li class="ellipsis_container"
                    tal:repeat="res results">
                  <div class="effective_date"
                       tal:content="python:view.format_effective_date(res.EffectiveDate)"/>
                  <a href="#" class="ellipsis_text"
                     tal:attributes="href res/getURL"
                     tal:content="res/Title">title</a>
                </li>
              </ul>
            </div>
          </div>

          <div class="box right_box">
            <a class="two-lines"
               tal:attributes="href string:${portal}/search?portal_type:list=Presentation+Online+Resource&amp;sort_on=effective&amp;sort_order=reverse">
              <h2 i18n:translate="label_latest_internet_resources">
                Neueste Präsentationen von Internetressourcen</h2>
            </a>
            <div id="latest_internet_resources_box"
                 tal:define="results view/getOnlinePresentations">
              <ul>
                <li class="ellipsis_container"
                    tal:repeat="res results">
                  <div class="effective_date"
                       tal:content="python:view.format_effective_date(res.EffectiveDate)"/>
                  <a href="#" class="ellipsis_text"
                     tal:attributes="href res/getURL" tal:content="res/Title">
                  title</a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div style="clear:left;"></div>

        <div id="participating-journals">
          <h3 i18n:translate="heading_participating_publications">
            Teilnehmende Zeitschriften</h3>
          <tal:rep repeat="publication view/getPublications">
            <a tal:attributes="href publication/getURL"
               tal:content="publication/Title">
              Publication</a>
            <span tal:condition="not:repeat/publication/end">|</span>
          </tal:rep>
        </div>
      </div>

    </metal:main>
  </body>
</html>
